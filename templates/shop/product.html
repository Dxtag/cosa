{% extends "base.html" %}
{% block content %}
{% load crispy_forms_tags %}

<div class="container">
    <div class="row">
        <div class="col-lg-10 mx-auto">

            <article class="card mt-4">
                <img class="card-img-top img-fluid" src="{{product.photo.url}}" alt="photo of {{product.name}}">
                <div class="card-body">
                    <h3 class="card-title">{{product.name}}</h3>
                    <div class="d-flex bd-highlight mt-3 mb-0">
                        <div class="mr-auto p-1 bd-highlight">
                            <h4>{{product.price}}z≈Ç</h4>
                        </div>
                        <form method="POST" class="form-inline">
                            {% csrf_token %}
                            <input type="submit" class="btn btn-success ml-auto" value="Dodaj do koszyka"
                                target="_self">
                            <input type="number" value="1" min="1" max="{{product.stock}}" name="quantity"
                                class="form-control" style="width: 60px;">
                        </form>
                    </div>
                </div>
                <div class="p-1">
                    <small>Kupiono: {{product.purchases}}</small>
                    <small>Na stanie: {{product.stock}}</small>
                </div>
            </article>


            <article class=" card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>Opis</h4>
                </div>
                <div class="card-body">
                    <p>{{product.description}}</p>
                </div>
            </article>
            <article class=" card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>Dodaj komentarz</h4>
                </div>
                <div class="card-body">
                    <form method="POST" action="{% url 'comments:add_comment'%}">
                        {% csrf_token %}
                        {{form | crispy}}
                        <input type="hidden" value="{{product.pk}}" name="pk">
                        <input type="submit" class="btn btn-success">
                    </form>
                </div>
            </article>
            <article class=" card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>Komentarze</h4>
                </div>
                <div class="card-body">
                    {% for comment in comments%}
                    <section class="border-bottom py-1">
                        <h5>{{comment.user}} {{comment.stars}}/5</h5>
                        {{comment.content}}
                    </section>
                    {% endfor %}
                </div>
            </article>

        </div>
    </div>
</div>

{% endblock %}